<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kompetenzradar BNE</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f3f4f6;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
        }
        @media (min-width: 1500px) { /* Bei grossen Bildschirmen mehr Platz für Radar Chart */
            .results-grid {
                grid-template-columns: 1fr 2fr; 
            }
        }
        .results-columns {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
         }

        @media (max-width: 600px) {
            .results-columns {
                grid-template-columns: 1fr;
    }
}
        .question-card {
            border: 1px solid #e5e7eb;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 6px;
        }
        .question-title {
            font-weight: bold;
            margin-bottom: 10px;
        }
        .meta-info {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 10px;
        }
        .mc-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        .mc-option {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px;
            border-radius: 4px;
            cursor: pointer;
        }
        .mc-option:hover {
            background-color: #f3f4f6;
        }
        .slider-container {
            padding: 20px 10px;
            position: relative;
        }
        .slider {
            width: 100%;
            height: 5px;
            background: #ddd;
            outline: none;
            -webkit-appearance: none;
            border-radius: 5px;
        }
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            background: #2563eb;
            border-radius: 50%;
            cursor: pointer;
        }
        .slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            background: #2563eb;
            border-radius: 50%;
            cursor: pointer;
            border: none;
        }
        .slider-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            font-size: 0.8em;
            color: #666;
        }
        .slider-value {
            text-align: center;
            margin-top: 10px;
            font-weight: bold;
            color: #2563eb;
        }
        .radar-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 100%;
        }
        #radarCanvas {
            width: 100%;
            max-width: 1000px;
            height: auto;
            image-rendering: -webkit-optimize-contrast;
            image-rendering: crisp-edges;
            -ms-interpolation-mode: nearest-neighbor;
            margin: 0 auto;
            display: block;
        }
        .legend {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 16px;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            font-weight: bold;
        }
        .legend-color {
            width: 20px;
            height: 10px;
            border-radius: 2px;
        }
        .page {
            display: none;
        }
        .page.active {
            display: block;
        }
        .navigation {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #e5e7eb;
        }
        .nav-button {
            padding: 10px 20px;
            background-color: #2563eb;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
        }
        .nav-button:disabled {
            background-color: #a0aec0;
            cursor: not-allowed;
        }
        .progress-indicator {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }
        .progress-dot {
            height: 10px;
            width: 10px;
            background-color: #cbd5e0;
            border-radius: 50%;
            margin: 0 5px;
        }
        .progress-dot.active {
            background-color: #2563eb;
        }
        .form-group {
            margin-bottom: 15px;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #e2e8f0;
            border-radius: 4px;
            box-sizing: border-box;
        }
        .intro-text {
            margin-bottom: 20px;
        }
        .summary-section {
            margin-bottom: 30px;
            padding: 15px;
            background-color: #f8fafc;
            border-radius: 6px;
        }
        .summary-section h3 {
            margin-top: 0;
            color: #2563eb;
        }
        .personal-data-section {
            margin-bottom: 30px;
            padding: 15px;
            background-color: #f0f9ff;
            border-radius: 6px;
        }
        .personal-data-section h3 {
            margin-top: 0;
            color: #0369a1;
        }
        .personal-data-item {
            margin-bottom: 8px;
        }
        .personal-data-label {
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Standortbestimmung BNE</h1>
        <div class="progress-indicator" id="progressIndicator">
            <!-- Wird dynamisch gefüllt -->
        </div>
        
        <!-- Seite 1: Persönliche Daten -->
        <div class="page" id="page-0">
            <div class="intro-text">
                <p>Willkommen zur Standortbestimmung im Bereich Bildung für nachhaltige Entwicklung (BNE). 
                   Bitte füllen Sie zunächst Ihre persönlichen Daten aus und beantworten Sie dann die Fragen auf den folgenden Seiten. V1.01/ARI</p>
            </div>
            <div class="form-group">
                <label for="vorname">Vorname</label>
                <input type="text" id="vorname" name="vorname">
            </div>
            <div class="form-group">
                <label for="nachname">Nachname</label>
                <input type="text" id="nachname" name="nachname">
            </div>
            <div class="form-group">
                <label for="matrikelnummer">Matrikelnummer</label>
                <input type="text" id="matrikelnummer" name="matrikelnummer">
            </div>
            <div class="form-group">
                <label for="email">E-Mail-Adresse an PH</label>
                <input type="email" id="email" name="email">
            </div>
            <div class="form-group">
                <label for="studienfach">Studienfächer</label>
                <input type="text" id="studienfach" name="studienfach">
            </div>
            <div class="form-group">
                <label for="lerngelegenheiten">Besuchte Lerngelegenheiten mit Querschnitt BNE</label>
                <textarea id="lerngelegenheiten" name="lerngelegenheiten" rows="3"></textarea>
            </div>
        </div>

        <!-- Fragen-Seiten werden dynamisch generiert -->
        <!-- Hier kommt pro Bereich eine eigene Seite -->
        
        <!-- Letzte Seite: Radar und Zusammenfassung -->
        <div class="page" id="page-final">
            <h2>Ihre Ergebnisse</h2>
            <p>Vielen Dank für die Beantwortung der Fragen. Hier ist die Zusammenfassung Ihrer Ergebnisse:</p>
            
            <div class="grid results-grid">
                <div>
                    <!-- Persönliche Daten Sektion -->
                    <div class="personal-data-section">
                        <h3>Persönliche Daten</h3>
                        <div id="personalDataSummary">
                            <!-- Wird dynamisch gefüllt -->
                        </div>
                    </div>
                    
                    <!-- Ergebnisse nach Bereichen -->
                    <div class="summary-section">
                        <h3>Ergebnisse nach Bereichen</h3>
                        <div id="resultsSummary">
                            <!-- Wird dynamisch gefüllt -->
                        </div>
                    </div>
                </div>
                
                <!-- Radar Graph Container -->
                <div class="radar-container">
                    <canvas id="radarCanvas" width="1000" height="1000"></canvas>
                    <div class="legend">
                        <div class="legend-item">
                            <svg width="30" height="15" viewBox="0 0 30 15">
                                <circle cx="15" cy="7.5" r="6" fill="rgba(37, 99, 235, 0.9)" stroke="rgba(37, 99, 235, 0.9)" stroke-width="2"/>
                            </svg>
                            <span>Subjektiv</span>
                        </div>
                        <div class="legend-item">
                            <svg width="30" height="15" viewBox="0 0 30 15">
                                <path d="M15,2 L22,12 L8,12 Z" fill="rgba(22, 163, 74, 0.9)" stroke="rgba(22, 163, 74, 0.9)" stroke-width="2"/>
                            </svg>
                            <span>Objektiv</span>
                        </div>
                        <div class="legend-item">
                            <svg width="30" height="15" viewBox="0 0 30 15">
                                <rect x="9" y="1.5" width="12" height="12" fill="rgba(220, 38, 38, 0.9)" stroke="rgba(220, 38, 38, 0.9)" stroke-width="2"/>
                            </svg>
                            <span>Interesse</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="navigation">
            <button id="prevButton" class="nav-button">Zurück</button>
            <button id="nextButton" class="nav-button">Weiter</button>
        </div>
    </div>

    <script>
        // =========================================================
        // FRAGENKATALOG - BEGINN
        // =========================================================
        // Anleitung zum Hinzufügen oder Bearbeiten von Fragen:
        // 1. Jede Frage hat eine eindeutige ID
        // 2. Die ID folgt dem Schema: <Bereichsnummer><laufende Nummer>
        //    z.B. 11, 12, 13 für Fragen im ersten Bereich
        // 3. Struktur jeder Frage:
        //    - id: Eindeutige Nummer der Frage
        //    - text: Der Fragetext
        //    - bereich: Einer der Bereiche aus der BEREICHE-Konstante
        //    - ebene: "subjektiv", "objektiv" oder "interesse"
        //    - typ: "slider" oder "mc" (Multiple Choice)
        //    - antworten: Array mit Antwortmöglichkeiten
        //      * text: Beschreibung der Antwort
        //      * wert: Punktwert (0-3)
        
        // Konfiguration
        const MIN_WERT = 0;
        const MAX_WERT = 3;
        
        const BEREICHE = [
            "LP: Wissen",
            "LP: Bewusstsein",
            "LP: Handeln",
            "Unterricht: Prinzipien",
            "U: Kompetenzen",
            "U: Themen",
            "U: Methoden",
            "S: Schulentwicklung",
        ];

        const FRAGEN = [
            // LP: Wissen Nummerierung: 1x
            {
                id: 11,
                text: "Wie gut kennen Sie sich mit den SDG aus?",
                bereich: "LP: Wissen",
                ebene: "subjektiv",
                typ: "slider",
                antworten: [
                    { text: "Wenig oder grundlegend", wert: 1 },
                    { text: "Fortgeschritten", wert: 2 },
                    { text: "Hohe Expertise", wert: 3 }
                ]
            },
            {
                id: 12,
                text: "Zu welcher Umsetzungsstrategie von Nachhaltigkeit passt die folgende Definition: «Weniger produzieren und konsumieren: Energie- und Materialverbrauch begrenzen. Beispiel: Vom Besitzen zum Teilen»",
                bereich: "LP: Wissen",
                ebene: "objektiv",
                typ: "mc",
                antworten: [
                    { text: "Suffizienz", wert: 3 }, // korrekte Antwort
                    { text: "Konsistenz", wert: 1 },
                    { text: "Effizienz", wert: 1 }, 
                ]
            },
            {
                id: 13,
                text: "Wie stark interessieren Sie sich für die SDG?",
                bereich: "LP: Wissen",
                ebene: "interesse",
                typ: "slider",
                antworten: [
                    { text: "Gering", wert: 1 },
                    { text: "Mittel", wert: 2 },
                    { text: "Hoch", wert: 3 }
                ]
            },
            {
                id: 14,
                text: "Um mein Unterricht zielorientierter gestalten zu können, möchte ich noch mehr über die Leitidee von Nachhaltiger Entwicklung und die Ziele einer BNE erfahren.",
                bereich: "LP: Wissen",
                ebene: "interesse",
                typ: "slider",
                antworten: [
                    { text: "trifft eher nicht zu", wert: 1 },
                    { text: "trifft eher zu", wert: 2 },
                    { text: "trifft zu", wert: 3 }
                ]
            },
            {
                id: 15,
                text: "Wie schätzen Sie Ihre Kompetenzen im Bereich der BNE im Unterricht ein?",
                bereich: "LP: Wissen",
                ebene: "subjektiv",
                typ: "slider",
                antworten: [
                    { text: "wenig Kenntnisse", wert: 1 },
                    { text: "mittlere Kompetenzen", wert: 2 },
                    { text: "hohe Kompetenzen", wert: 3 }
                ]
            },
            {
                id: 16,
                text: "Der Lehrplan 21 bezieht sich auf das «Drei-Dimensionen-Modell der Nachhaltigen Entwicklung». Welche ist keine der drei Dimensionen?",
                bereich: "LP: Wissen",
                ebene: "objektiv",
                typ: "mc",
                antworten: [
                    { text: "Gesellschaft", wert: 1 },
                    { text: "Umwelt", wert: 1 },
                    { text: "Soziales", wert: 3 }, // korrekte Antwort
                    { text: "Wirtschaft", wert: 1 }
                ]
            },
            {
                id: 17,
                text: "Zu welcher Umsetzungsstrategie von Nachhaltigkeit passt folgendes Beispiel: «Eine Glühbirne wird mit LED ersetzt.»",
                bereich: "LP: Wissen",
                ebene: "objektiv",
                typ: "mc",
                antworten: [
                    { text: "Suffizienz", wert: 1 },
                    { text: "Konsistenz", wert: 1 },
                    { text: "Effizienz", wert: 3 }, // korrekte Antwort
                ]
            },
            {
                id: 18,
                text: "Ist die Förderung einer Nachhaltigen Entwicklung in der Schweizerischen Bundesverfassung als Auftrag staatlichen Handelns festgeschrieben?",
                bereich: "LP: Wissen",
                ebene: "objektiv",
                typ: "mc",
                antworten: [
                    { text: "Ja", wert: 3 }, // korrekte Antwort
                    { text: "Nein", wert: 1 }
                ]
            },
            // LP: Bewusstsein id 2x
            {
                id: 21,
                text: "Ich fühle mich sicher, wie ich im BNE-Unterricht meinen Standpunkt und meine Meinung vertreten darf und kann.",
                bereich: "LP: Bewusstsein",
                ebene: "subjektiv",
                typ: "slider",
                antworten: [
                    { text: "trifft nicht zu", wert: 1 },
                    { text: "trifft eher zu", wert: 2 },
                    { text: "trifft zu", wert: 3 }
                ]
            },
            {
                id: 22,
                text: "Ich möchte mehr über den Beutelsbacher Konsens erfahren und mich mit der Umsetzung von BNE im Unterricht auseinandersetzen",
                bereich: "LP: Bewusstsein",
                ebene: "interesse",
                typ: "slider",
                antworten: [
                    { text: "trifft eher nicht zu", wert: 1 },
                    { text: "trifft eher zu", wert: 2 },
                    { text: "trifft sehr zu", wert: 3 }
                ]
            },
            {
                id: 23,
                text: "Der Beutelsbacher Konsens besagt, dass sich Lehrpersonen im Unterricht nicht zu politisch heiklen Themen äussern sollten.",
                bereich: "LP: Bewusstsein",
                ebene: "objektiv",
                typ: "mc",
                antworten: [
                    { text: "richtig", wert: 1 },
                    { text: "falsch", wert: 3 }, // korrekte Antwort
                    { text: "teilweise richtig", wert: 1 },
                ]
            },
            {
                id: 25,
                text: "Ich fühle mich noch nicht sicher, wie ich im BNE-Unterricht meinen Standpunkt und meine Meinung vertreten kann. Ich möchte deshalb noch mehr darüber erfahren, was im BNE-Unterricht erwünscht, und was verboten ist.",
                bereich: "LP: Bewusstsein",
                ebene: "interesse",
                typ: "slider",
                antworten: [
                    { text: "trifft nicht zu", wert: 1 },
                    { text: "trifft teilweise zu", wert: 2 },
                    { text: "trifft zu", wert: 3 }
                ]
            },

            // LP: Handeln id 3x
            {
                id: 31,
                text: "Wie stark beschäftigt Sie die Frage, wie Ihr Handeln als Lehrperson das Lernen der Schüler*innen in Bezug auf BNE beeinflusst?",
                bereich: "LP: Handeln",
                ebene: "subjektiv",
                typ: "slider",
                antworten: [
                    { text: "Wenig", wert: 1 },
                    { text: "Mittel", wert: 2 },
                    { text: "Stark", wert: 3 }
                ]
            },
            {
                id: 32,
                text: "Im BNE-Unterricht gibt es verschiedene normative Rahmen. Um welchen Ansatz handelt es sich bei: Vermittlung von Expertenwissen, Förderung nachhaltigen Verhaltens und Lernen für eine nachhaltige Entwicklung?",
                bereich: "LP: Handeln",
                ebene: "objektiv",
                typ: "mc",
                antworten: [
                    { text: "Instrumenteller Ansatz", wert: 3 }, // korrekte Antwort
                    { text: "Emanzipatorischer Ansatz", wert: 1 },
                    { text: "Transformativer Ansatz", wert: 1 }
                ]
            },
            {
                id: 33,
                text: "Im BNE-Unterricht gibt es verschiedene normative Rahmen. Um welchen Ansatz handelt es sich bei: Widersprüche (dialektisch) überwinden, nicht-Vorhersehbarkeit, Emotionen, Lernen durch nachhaltige Entwicklung?",
                bereich: "LP: Handeln",
                ebene: "objektiv",
                typ: "mc",
                antworten: [
                    { text: "Instrumenteller Ansatz", wert: 1 },
                    { text: "Emanzipatorischer Ansatz", wert: 1 },
                    { text: "Transformativer Ansatz", wert: 3 } // korrekte Antwort
                ]
            },
            {
                id: 34,
                text: "Im BNE-Unterricht gibt es verschiedene normative Rahmen. Um welchen Ansatz handelt es sich bei: Befähigung zu Kritik und Reflexion, Unsicherheiten, Widersprüche; Lernen als nachhaltige Entwicklung?",
                bereich: "LP: Handeln",
                ebene: "objektiv",
                typ: "mc",
                antworten: [
                    { text: "Instrumenteller Ansatz", wert: 1 },
                    { text: "Emanzipatorischer Ansatz", wert: 3 }, // korrekte Antwort
                    { text: "Transformativer Ansatz", wert: 1 }
                ]
            },
            {
                id: 35,
                text: "Welche Gefahr besteht primär bei einem instrumentellen Ansatz im BNE-Unterricht?",
                bereich: "LP: Handeln",
                ebene: "objektiv",
                typ: "mc",
                antworten: [
                    { text: "Gefahr der Indoktrination", wert: 3 }, // korrekte Antwort
                    { text: "Gefahr des Zeitmangels", wert: 1 }
                ]
            },
            {
                id: 36,
                text: "Welche Gefahr besteht primär bei einem emanzipatorischen Ansatz im BNE-Unterricht?",
                bereich: "LP: Handeln",
                ebene: "objektiv",
                typ: "mc",
                antworten: [
                    { text: "Gefahr der Indoktrination", wert: 1 },
                    { text: "Gefahr des Zeitmangels", wert: 3 } // korrekte Antwort
                ]
            },
            {
                id: 37,
                text: "Um mein eigenes Rollen- und Funktionsverständnis in Zusammenhang mit nachhaltiger Entwicklung und BNE als Lehrperson zu definieren, möchte ich mich mit entsprechenden Konzepten auseinandersetzen.",
                bereich: "LP: Handeln",
                ebene: "interesse",
                typ: "slider",
                antworten: [
                    { text: "stimme eher nicht zu", wert: 1 },
                    { text: "stimme teilweise zu", wert: 2 },
                    { text: "stimme zu", wert: 3 }
                ]
            },

            // Unterricht: Prinzipien id 4x
            {
                id: 41,
                text: "Ich kenne bereits viele BNE-relevante Prinzipien, die ich im Unterricht umsetzen kann.",
                bereich: "Unterricht: Prinzipien",
                ebene: "subjektiv",
                typ: "slider",
                antworten: [
                    { text: "trifft nicht zu", wert: 1 },
                    { text: "trifft teilweise zu", wert: 2 },
                    { text: "trifft zu", wert: 3 }
                ]
            },
            {
                id: 42,
                text: "Aktualitätsbezug ist als eines von drei didaktischen BNE-Prinzipen im Lehrplan 21 verankert. Ist die Aussage korrekt?",
                bereich: "Unterricht: Prinzipien",
                ebene: "objektiv",
                typ: "mc",
                antworten: [
                    { text: "Ja", wert: 1 },
                    { text: "Nein", wert: 3 } // korrekte Antwort
                ]
            },
            {
                id: 43,
                text: "«Im Unterricht werden eigene und kollektive Denkweisen und Werte aufgespürt und miteinander verglichen.» Um welches pädagogische Prinzip von éducation21 handelt es sich?",
                bereich: "Unterricht: Prinzipien",
                ebene: "objektiv",
                typ: "mc",
                antworten: [
                    { text: "Wertereflexion und Handlungsorientierung", wert: 3 }, // korrekte Antwort
                    { text: "Chancengerechtigkeit", wert: 1 },
                    { text: "Partizipation und Empowerment", wert: 1 }
                ]
            },
            {
                id: 44,
                text: "«Nachhaltige Entwicklung ist ein optimistischer Ansatz, der sich an einer positiven Zukunft orientiert.» Um welches pädagogische Prinzip von éducation21 handelt es sich?",
                bereich: "Unterricht: Prinzipien",
                ebene: "objektiv",
                typ: "mc",
                antworten: [
                    { text: "Visionsorientierung", wert: 3 }, // korrekte Antwort
                    { text: "Vernetztes Denken", wert: 1 },
                    { text: "Partizipation und Empowerment", wert: 1 }
                ]
            },
            {
                id: 45,
                text: "Um die BNE-Prinzipien noch besser verstehen zu können, möchte ich mich vertiefter mit diesen befassen.",
                bereich: "Unterricht: Prinzipien",
                ebene: "interesse",
                typ: "slider",
                antworten: [
                    { text: "stimme eher nicht zu", wert: 1 },
                    { text: "stimme teilweise zu", wert: 2 },
                    { text: "stimme zu", wert: 3 }
                ]
            },

            // U: Kompetenzen id 5x
            {
                id: 51,
                text: "Wie gut können Sie BNE-Kompetenzen in Ihrem Unterricht fördern?",
                bereich: "U: Kompetenzen",
                ebene: "subjektiv",
                typ: "slider",
                antworten: [
                    { text: "Grundlegend", wert: 1 },
                    { text: "Gut", wert: 2 },
                    { text: "Sehr gut", wert: 3 }
                ]
            },
            {
                id: 52,
                text: "Die von éducation21 formulierten Kompetenzen können den DeSeCo-Schlüsselkompetenzen zugeordnet werden. Zu welcher Kategorie gehören Wissen, Systeme, Antizipation und Kreativität?",
                bereich: "U: Kompetenzen",
                ebene: "objektiv",
                typ: "mc",
                antworten: [
                    { text: "Interaktive Verwendung von Medien und Tools", wert: 3 }, // korrekte Antwort
                    { text: "Interagieren in heterogenen Gruppen", wert: 1 },
                    { text: "Eigenständiges Handeln", wert: 1 }
                ]
            },
            {
                id: 53,
                text: "Die von éducation21 formulierten Kompetenzen können den DeSeCo-Schlüsselkompetenzen zugeordnet werden. Zu welcher Kategorie gehören Perspektive, Kooperation und Partizipation?",
                bereich: "U: Kompetenzen",
                ebene: "objektiv",
                typ: "mc",
                antworten: [
                    { text: "Interaktive Verwendung von Medien und Tools", wert: 1 },
                    { text: "Interagieren in heterogenen Gruppen", wert: 3 }, // korrekte Antwort
                    { text: "Eigenständiges Handeln", wert: 1 }
                ]
            },
            {
                id: 54,
                text: "Die von éducation21 formulierten Kompetenzen können den DeSeCo-Schlüsselkompetenzen zugeordnet werden. Zu welcher Kategorie gehören Verantwortung, Werte und Handeln?",
                bereich: "U: Kompetenzen",
                ebene: "objektiv",
                typ: "mc",
                antworten: [
                    { text: "Interaktive Verwendung von Medien und Tools", wert: 1 },
                    { text: "Interagieren in heterogenen Gruppen", wert: 1 },
                    { text: "Eigenständiges Handeln", wert: 3 } // korrekte Antwort
                ]
            },
            {
                id: 55,
                text: "Im Lehrplan 21 sind spezifische BNE-Kompetenzen ausformuliert.",
                bereich: "U: Kompetenzen",
                ebene: "objektiv",
                typ: "mc",
                antworten: [
                    { text: "Ja", wert: 1 },
                    { text: "Nein, nur über fächerübergreifende Querverweise", wert: 3 }, // korrekte Antwort
                    { text: "Nein, überhaupt nicht", wert: 1 }
                ]
            },
            {
                id: 56,
                text: "Um welche BNE-Kompetenz nach éducation21 handelt es sich: «Sich als Teil der Welt erfahren (Sich selbst, die soziale und natürliche Umwelt ganzheitlich und im globalen Kontext wahrnehmen)»?",
                bereich: "U: Kompetenzen",
                ebene: "objektiv",
                typ: "mc",
                antworten: [
                    { text: "Verantwortung", wert: 3 }, // korrekte Antwort
                    { text: "Partizipation", wert: 1 },
                    { text: "Kooperation", wert: 1 }
                ]
            },
            {
                id: 57,
                text: "Um welche Kompetenz handelt es sich: «Vorausschauend denken und handeln (Zukunftsvisionen entwickeln, sie in Bezug zur Realität und zu aktuellen Entwicklungsrichtungen setzen)»?",
                bereich: "U: Kompetenzen",
                ebene: "objektiv",
                typ: "mc",
                antworten: [
                    { text: "Systeme", wert: 1 },
                    { text: "Antizipation", wert: 3 }, // korrekte Antwort
                    { text: "Kreativität", wert: 1 }
                ]
            },
            {
                id: 58,
                text: "Um meinen Unterricht kompetenzorientiert gestalten zu können, möchte ich mich noch vertiefter mit den BNE-Kompetenzen auseinandersetzen.",
                bereich: "U: Kompetenzen",
                ebene: "interesse",
                typ: "slider",
                antworten: [
                    { text: "stimme eher nicht zu", wert: 1 },
                    { text: "stimme teilweise zu", wert: 2 },
                    { text: "stimme zu", wert: 3 }
                ]
            },

            // U: Themen id 6x
            {
                id: 61,
                text: "Wie gut kennen Sie die fächerübergreifenden Themen zu nachhaltiger Entwicklung im Lehrplan 21?",
                bereich: "U: Themen",
                ebene: "subjektiv",
                typ: "slider",
                antworten: [
                    { text: "Wenig", wert: 1 },
                    { text: "Gut", wert: 2 },
                    { text: "Sehr gut", wert: 3 }
                ]
            },
            {
                id: 62,
                text: "Im Lehrplan 21 ist das Thema \"Geschlechter und Gleichstellung\" kein fächerübergreifendes Thema im Kontext Bildung für nachhaltige Entwicklung.",
                bereich: "U: Themen",
                ebene: "objektiv",
                typ: "mc",
                antworten: [
                    { text: "Richtig", wert: 1 },
                    { text: "Falsch", wert: 3 } // korrekte Antwort
                ]
            },
            {
                id: 63,
                text: "Im Lehrplan 21 werden sieben fächerübergreifende Themen unter der Leitidee Nachhaltiger Entwicklung aufgeführt.",
                bereich: "U: Themen",
                ebene: "objektiv",
                typ: "mc",
                antworten: [
                    { text: "Richtig", wert: 3 }, // korrekte Antwort
                    { text: "Falsch", wert: 1 }
                ]
            },
            {
                id: 64,
                text: "Wie interessiert sind Sie daran, sich mit fächerübergreifenden Themen zur nachhaltigen Entwicklung auseinanderzusetzen?",
                bereich: "U: Themen",
                ebene: "interesse",
                typ: "slider",
                antworten: [
                    { text: "wenig interessiert", wert: 1 },
                    { text: "interessiert", wert: 2 },
                    { text: "sehr interessiert", wert: 3 }
                ]
            },

            // U: Methoden id 7x
            {
                id: 71,
                text: "Wie gut beherrschen Sie unterschiedliche Methoden zur Förderung von BNE im Unterricht?",
                bereich: "U: Methoden",
                ebene: "subjektiv",
                typ: "slider",
                antworten: [
                    { text: "Grundlegend", wert: 1 },
                    { text: "Gut", wert: 2 },
                    { text: "Sehr gut", wert: 3 }
                ]
            },
            {
                id: 72,
                text: "Für die Förderung von kreativen Lösungsansätzen bei Nachhaltigkeitsproblemen eignet sich im Kontext von BNE die Methode Design Thinking.",
                bereich: "U: Methoden",
                ebene: "objektiv",
                typ: "mc",
                antworten: [
                    { text: "Ja", wert: 3 }, // korrekte Antwort
                    { text: "Nein", wert: 1 }
                ]
            },
            {
                id: 73,
                text: "Schüler*innen setzen sich mit einem moralischen Dilemma auseinander und beschreiben ihre Gefühle. Welcher Unterrichtszugang trifft am besten zu?",
                bereich: "U: Methoden",
                ebene: "objektiv",
                typ: "mc",
                antworten: [
                    { text: "Transformatives Lernen", wert: 3 }, // korrekte Antwort
                    { text: "Entdeckendes Lernen", wert: 1 },
                    { text: "Situatives Lernen", wert: 1 }
                ]
            },
            {
                id: 74,
                text: "Wie interessiert sind Sie daran, diese Unterrichtsmethoden für BNE in Ihrem Unterricht umzusetzen?",
                bereich: "U: Methoden",
                ebene: "interesse",
                typ: "slider",
                antworten: [
                    { text: "wenig interessiert", wert: 1 },
                    { text: "interessiert", wert: 2 },
                    { text: "sehr interessiert", wert: 3 }
                ]
            },

            // S: Schulentwicklung id 8x
            {
                id: 81,
                text: "Welche der untenstehenden Massnahmen ist für den Whole Institution Approach **nicht** von zentraler Bedeutung?",
                bereich: "S: Schulentwicklung",
                ebene: "objektiv",
                typ: "mc",
                antworten: [
                    { text: "Fächerübergreifende Projekte", wert: 1 },
                    { text: "Politische Einstellung von Lehrpersonen", wert: 3 }, // korrekte Antwort
                    { text: "Partizipative Schulkultur", wert: 1 },
                ]
            },
            {
                id: 82,
                text: "Das wichtigste Anliegen des Whole Institution Approaches ist es, dass alle Lehrpersonen BNE in ihrem Unterricht umsetzen.",
                bereich: "S: Schulentwicklung",
                ebene: "objektiv",
                typ: "mc",
                antworten: [
                    { text: "Ja", wert: 3 }, // korrekte Antwort
                    { text: "Nein", wert: 1 }
                ]
            },
            {
                id: 83,
                text: "Wie gut verstehen Sie das Konzept des Whole Institution Approach für die Umsetzung von BNE?",
                bereich: "S: Schulentwicklung",
                ebene: "subjektiv",
                typ: "slider",
                antworten: [
                    { text: "Grundlegend", wert: 1 },
                    { text: "Gut", wert: 2 },
                    { text: "Sehr gut", wert: 3 }
                ]
            },
            {
                id: 84,
                text: "Wie interessiert sind Sie an der Umsetzung von BNE im schulischen Kontext als angehende Lehrperson?",
                bereich: "S: Schulentwicklung",
                ebene: "interesse",
                typ: "slider",
                antworten: [
                    { text: "wenig interessiert", wert: 1 },
                    { text: "interessiert", wert: 2 },
                    { text: "sehr interessiert", wert: 3 }
                ]
            }
        ];

        // =========================================================
        // FRAGENKATALOG - ENDE
        // =========================================================

        // Globaler State für Antworten und aktuelle Seite
        let antworten = {};
        let personalData = {};
        let currentPage = 0;
        let pages = [];

        // Seiten nach Bereichen erstellen
        function initPages() {
            // Persönliche Daten-Seite ist bereits vorhanden (page-0)
            
            // Gruppiere Fragen nach Bereichen
            const bereicheFragen = BEREICHE.reduce((acc, bereich) => {
                acc[bereich] = FRAGEN.filter(frage => frage.bereich === bereich);
                return acc;
            }, {});
            
            // Erstelle für jeden Bereich eine Seite
            let pageIndex = 1;
            BEREICHE.forEach(bereich => {
                const pageId = `page-${pageIndex}`;
                pages.push(pageId);
                
                // Erstelle Container für diesen Bereich
                const pageDiv = document.createElement('div');
                pageDiv.className = 'page';
                pageDiv.id = pageId;
                
                // Titel für den Bereich
                const bereichTitel = document.createElement('h2');
                bereichTitel.textContent = bereich;
                pageDiv.appendChild(bereichTitel);
                
                // Fragen für diesen Bereich hinzufügen
                const bereichContainer = document.createElement('div');
                bereichContainer.id = `bereich-${pageIndex}`;
                pageDiv.appendChild(bereichContainer);
                
                // Füge die Seite zum Dokument hinzu
                document.querySelector('.container').insertBefore(pageDiv, document.getElementById('page-final'));
                
                pageIndex++;
            });
            
            // Final-Seite hinzufügen
            pages.push('page-final');
            
            // Fortschrittsanzeige erstellen
            updateProgressIndicator();
        }

        // Fortschrittsanzeige aktualisieren
        function updateProgressIndicator() {
            const progressContainer = document.getElementById('progressIndicator');
            progressContainer.innerHTML = '';
            
            const totalPages = pages.length + 1; // +1 für die persönliche Daten-Seite
            
            for (let i = 0; i < totalPages; i++) {
                const dot = document.createElement('div');
                dot.className = 'progress-dot';
                if (i === currentPage) {
                    dot.classList.add('active');
                }
                progressContainer.appendChild(dot);
            }
        }

        // Fragen für den aktuellen Bereich rendern
        function renderFragen() {
            if (currentPage === 0 || currentPage === pages.length) {
                return; // Keine Fragen auf der ersten und letzten Seite
            }
            
            const bereichIndex = currentPage - 1; // -1 weil erste Seite persönliche Daten ist
            const bereich = BEREICHE[bereichIndex];
            const bereichContainer = document.getElementById(`bereich-${currentPage}`);
            
            // Fragen für diesen Bereich filtern
            const bereichFragen = FRAGEN.filter(frage => frage.bereich === bereich);
            
            bereichContainer.innerHTML = bereichFragen.map(frage => {
                if (frage.typ === 'slider') {
                    return `
                        <div class="question-card">
                            <div class="question-title">${frage.text}</div>
                            <div class="meta-info">
                                Ebene: ${frage.ebene}
                            </div>
                            <div class="slider-container">
                                <input 
                                    type="range" 
                                    min="${MIN_WERT}" 
                                    max="${MAX_WERT}" 
                                    step="1"
                                    value="${antworten[frage.id] || MIN_WERT}"
                                    onchange="handleAntwort(${frage.id}, parseInt(this.value))"
                                    oninput="this.nextElementSibling.nextElementSibling.textContent = this.value"
                                    class="slider"
                                >
                                <div class="slider-labels">
                                    ${frage.antworten.map(antwort => `
                                        <span>${antwort.text}</span>
                                    `).join('')}
                                </div>
                                <div class="slider-value">${antworten[frage.id] || MIN_WERT}</div>
                            </div>
                        </div>
                    `;
                } else {
                    return `
                        <div class="question-card">
                            <div class="question-title">${frage.text}</div>
                            <div class="meta-info">
                                Ebene: ${frage.ebene}
                            </div>
                            <div class="mc-group">
                                ${frage.antworten.map((antwort, idx) => `
                                    <label class="mc-option">
                                        <input 
                                            type="radio" 
                                            name="frage-${frage.id}" 
                                            value="${antwort.wert}"
                                            ${antworten[frage.id] === antwort.wert ? 'checked' : ''}
                                            onchange="handleAntwort(${frage.id}, ${antwort.wert})"
                                        >
                                        ${antwort.text}
                                    </label>
                                `).join('')}
                            </div>
                        </div>
                    `;
                }
            }).join('');
        }

        // Sammeln der persönlichen Daten
        function collectPersonalData() {
            personalData = {
                vorname: document.getElementById('vorname').value,
                nachname: document.getElementById('nachname').value,
                matrikelnummer: document.getElementById('matrikelnummer').value,
                email: document.getElementById('email').value,
                studienfach: document.getElementById('studienfach').value,
                lerngelegenheiten: document.getElementById('lerngelegenheiten').value
            };
        }

        // Anzeigen der persönlichen Daten auf der Ergebnisseite
        function renderPersonalData() {
            const container = document.getElementById('personalDataSummary');
            
            // Überprüfen, ob persönliche Daten vorhanden sind
            const hasData = Object.values(personalData).some(value => value.trim() !== '');
            
            if (!hasData) {
                container.innerHTML = '<p>Keine persönlichen Daten angegeben.</p>';
                return;
            }
            
            const labels = {
                vorname: 'Vorname',
                nachname: 'Nachname',
                matrikelnummer: 'Matrikelnummer',
                email: 'E-Mail',
                studienfach: 'Studienfächer',
                lerngelegenheiten: 'Besuchte Lerngelegenheiten'
            };
            
            let html = '';
            for (const [key, value] of Object.entries(personalData)) {
                if (value.trim() !== '') {
                    html += `
                        <div class="personal-data-item">
                            <span class="personal-data-label">${labels[key]}:</span> 
                            ${value}
                        </div>
                    `;
                }
            }
            
            container.innerHTML = html;
        }

// Ergebniszusammenfassung anzeigen
function renderResultsSummary() {
    const resultContainer = document.getElementById('resultsSummary');
    
    // Ergebnisse für jeden Bereich erstellen
    const bereichErgebnisse = BEREICHE.map(bereich => {
        const bereichFragen = FRAGEN.filter(frage => frage.bereich === bereich);
        const ebenen = ['subjektiv', 'objektiv', 'interesse'];
        
        const ebenenWerte = ebenen.map(ebene => {
            const ebenenFragen = bereichFragen.filter(frage => frage.ebene === ebene);
            const beantworteteFragen = ebenenFragen.filter(frage => antworten[frage.id] !== undefined);
            
            if (beantworteteFragen.length === 0) return 0;
            
            const summe = beantworteteFragen.reduce((sum, frage) => sum + antworten[frage.id], 0);
            return (summe / beantworteteFragen.length).toFixed(1);
        });
        
        return `
            <div style="margin-bottom: 10px;">
                <strong>${bereich}</strong>
                <ul style="margin-top: 5px;">
                    <li>Subjektiv: ${ebenenWerte[0]}</li>
                    <li>Objektiv: ${ebenenWerte[1]}</li>
                    <li>Interesse: ${ebenenWerte[2]}</li>
                </ul>
            </div>
        `;
    });
    
    // Bereiche in zwei Spalten aufteilen
    const mitte = Math.ceil(bereichErgebnisse.length / 2);
    const ergebnisseLinks = bereichErgebnisse.slice(0, mitte).join('');
    const ergebnisseRechts = bereichErgebnisse.slice(mitte).join('');
    
    // HTML für zwei Spalten erzeugen
    const html = `
        <div class="results-columns">
            <div class="results-column">${ergebnisseLinks}</div>
            <div class="results-column">${ergebnisseRechts}</div>
        </div>
    `;
    
    resultContainer.innerHTML = bereichErgebnisse.length > 0 ? html : '<p>Keine Daten vorhanden.</p>';
}

        //Canvas-Initialisierung für den Radar-Chart
        function setupCanvas(canvas) {
            // Setze Canvas auf Grösse mit guter Auflösung
            canvas.width = 1600;
            canvas.height = 1600;
            
            // Setze Display-Grösse via CSS
            canvas.style.width = '100%';
            canvas.style.height = 'auto';
            canvas.style.maxWidth = '1000px';
            
            const ctx = canvas.getContext('2d');
            
            // Aktiviere Anti-Aliasing für glattere Linien
            ctx.imageSmoothingEnabled = true;
            ctx.imageSmoothingQuality = 'high';
            
            return ctx;
        }

        // Antwort Handler
        function handleAntwort(fragenId, wert) {
            antworten[fragenId] = wert;
        }

        // Radar-Chart zeichnen 
        function drawRadar() {
            const canvas = document.getElementById('radarCanvas');
            const ctx = setupCanvas(canvas);

            // Berechne das Zentrum und den Radius basierend auf den tatsächlichen Canvas-Dimensionen
            const width = canvas.width;
            const height = canvas.height;
            const centerX = width / 2;
            const centerY = height / 2;
            const radius = Math.min(width, height) * 0.35; // xx% des Canvas-Radius verwenden
            
            // Canvas löschen
            ctx.clearRect(0, 0, width, height);

            const anzahlBereiche = BEREICHE.length;
            const winkel = (2 * Math.PI) / anzahlBereiche;

            // Hilfsfunktion zum Zeichnen der verschiedenen Marker
            function drawMarker(x, y, type, color) {
                ctx.fillStyle = color;
                ctx.strokeStyle = color;
                ctx.lineWidth = 2;
                
                switch(type) {
                    case 'circle':
                        ctx.beginPath();
                        ctx.arc(x, y, 8, 0, 2 * Math.PI);
                        ctx.fill();
                        ctx.stroke();
                        break;
                    case 'triangle':
                        ctx.beginPath();
                        ctx.moveTo(x, y - 8);
                        ctx.lineTo(x + 8, y + 8);
                        ctx.lineTo(x - 8, y + 8);
                        ctx.closePath();
                        ctx.fill();
                        ctx.stroke();
                        break;
                    case 'square':
                        ctx.beginPath();
                        ctx.rect(x - 6, y - 6, 12, 12);
                        ctx.fill();
                        ctx.stroke();
                        break;
                }
            }

            // Konzentrische Kreise für die drei Radien
            for (let r = 1; r <= 3; r++) {
                ctx.beginPath();
                ctx.strokeStyle = '#d1d5db';
                ctx.lineWidth = 1;
                
                // Berechne den aktuellen Radius (von innen nach aussen)
                const currentRadius = radius * (r / 3);
                
                // Zeichne einen Kreis mit dem aktuellen Radius
                ctx.arc(centerX, centerY, currentRadius, 0, 2 * Math.PI);
                ctx.stroke();
                
                /* Füge Beschriftung für den Radius hinzu (1, 2, 3)
                if (r > 0) {
                    ctx.fillStyle = '#9ca3af';
                    ctx.font = '16px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText(r.toString(), centerX + 5, centerY - currentRadius + 16);
                }
                */
            }

            // Achsenlinien vom Zentrum zu den äusseren Punkten
            ctx.beginPath();
            ctx.strokeStyle = '#d1d5db';
            ctx.lineWidth = 1;
            for (let i = 0; i < anzahlBereiche; i++) {
                const angle = i * winkel - Math.PI / 2;
                const x = centerX + radius * Math.cos(angle);
                const y = centerY + radius * Math.sin(angle);
                ctx.moveTo(centerX, centerY);
                ctx.lineTo(x, y);
            }
            ctx.stroke();

            // Beschriftungen
            ctx.font = 'bold 30px Arial';
            ctx.fillStyle = '#000';
            
            BEREICHE.forEach((bereich, i) => {
                const angle = i * winkel - Math.PI / 2;
                const labelRadius = radius + 30; // Abstand für die Beschriftungen
                let x = centerX + labelRadius * Math.cos(angle);
                let y = centerY + labelRadius * Math.sin(angle);
                
                // Text an die Achsenausrichtung anpassen
                if (Math.cos(angle) < -0.1) {
                    ctx.textAlign = 'right';
                } else if (Math.cos(angle) > 0.1) {
                    ctx.textAlign = 'left';
                } else {
                    ctx.textAlign = 'center';
                }
                
                // Vertikale Anpassungen
                if (Math.sin(angle) > 0.9) {
                    y += 10; // unten
                } else if (Math.sin(angle) < -0.9) {
                    y -= 5; // oben
                }
                
                // Text in zwei Zeilen aufteilen
                const lines = splitBereichLabel(bereich);
                
                // Erste Zeile (kleiner Abstand nach oben)
                ctx.font = 'bold 30px Arial';
                ctx.fillText(lines[0], x, y - 15);
                
                // Zweite Zeile (kleiner Abstand nach unten)
                ctx.font = '30px Arial';
                ctx.fillText(lines[1], x, y + 15);
            });
            
            // Zurücksetzen des textAlign
            ctx.textAlign = 'left';

            // Daten aggregieren und normalisieren
            const aggregierteWerte = BEREICHE.reduce((acc, bereich) => {
                acc[bereich] = {
                    subjektiv: [],
                    objektiv: [],
                    interesse: []
                };
                return acc;
            }, {});

            Object.entries(antworten).forEach(([fragenId, wert]) => {
                const frage = FRAGEN.find(f => f.id === parseInt(fragenId));
                if (frage) {
                    aggregierteWerte[frage.bereich][frage.ebene].push(wert);
                }
            });

            // ÄNDERUNG 1: Entfernung des Math.max(1, durchschnitt(...)) 
            const chartData = BEREICHE.map(bereich => ({
                bereich,
                subjektiv: durchschnitt(aggregierteWerte[bereich].subjektiv),
                objektiv: durchschnitt(aggregierteWerte[bereich].objektiv),
                interesse: durchschnitt(aggregierteWerte[bereich].interesse)
            }));

            // Definition der Ebenen mit ihren Eigenschaften
            const ebenen = [
                { name: 'subjektiv', farbe: ['rgba(37, 99, 235, 0.2)', 'rgba(37, 99, 235, 0.9)'], marker: 'circle' },
                { name: 'objektiv', farbe: ['rgba(22, 163, 74, 0.2)', 'rgba(22, 163, 74, 0.9)'], marker: 'triangle' },
                { name: 'interesse', farbe: ['rgba(220, 38, 38, 0.2)', 'rgba(220, 38, 38, 0.9)'], marker: 'square' }
            ];

            // Zeichne die Datenpunkte und Verbindungslinien
            ebenen.forEach((ebene) => {
                const punkte = chartData.map((data, i) => {
                    // ÄNDERUNG 2: Anpassung der Normalisierung, damit 0 im Zentrum angezeigt wird
                    const normalisierterWert = data[ebene.name] / 3;
                    const angle = i * winkel - Math.PI / 2;
                    return {
                        x: centerX + ((radius * normalisierterWert)) * Math.cos(angle),
                        y: centerY + ((radius * normalisierterWert)) * Math.sin(angle)
                    };
                });

                // Zeichne die Verbindungslinien
                ctx.beginPath();
                ctx.fillStyle = ebene.farbe[0];
                ctx.strokeStyle = ebene.farbe[1];
                ctx.lineWidth = 2;

                punkte.forEach((punkt, i) => {
                    if (i === 0) {
                        ctx.moveTo(punkt.x, punkt.y);
                    } else {
                        ctx.lineTo(punkt.x, punkt.y);
                    }
                });
                ctx.lineTo(punkte[0].x, punkte[0].y);
                ctx.closePath();
                ctx.fill();
                ctx.stroke();

                // Zeichne die Marker an den Datenpunkten
                punkte.forEach(punkt => {
                    drawMarker(punkt.x, punkt.y, ebene.marker, ebene.farbe[1]);
                });
            });
        }

        // Hilfsfunktion: Durchschnitt berechnen
        function durchschnitt(werte) {
            if (werte.length === 0) return MIN_WERT;
            return werte.reduce((a, b) => a + b, 0) / werte.length;
        }
        
        // Hilfsfunktion: Bereichsnamen in zwei Zeilen aufteilen
        function splitBereichLabel(text) {
            // Aufteilen bei ": " (z.B. "LP: Wissen" wird zu ["LP:", "Wissen"])
            const match = text.match(/^([^:]+):\s*(.+)$/);
            if (match) {
                return [match[1] + ":", match[2]];
            }
            
            // Fallback: Teile nach dem ersten Wort
            const words = text.split(" ");
            if (words.length > 1) {
                return [words[0], words.slice(1).join(" ")];
            }
            
            // Wenn keine Aufteilung möglich ist
            return [text, ""];
        }

        // Seiten-Navigation
        function goToPage(pageIndex) {
            // Verstecke aktuelle Seite
            const activePage = document.querySelector('.page.active');
            if (activePage) {
                activePage.classList.remove('active');
            }
            
            // Sammle persönliche Daten, wenn von Seite 0 weiternavigiert wird
            if (currentPage === 0 && pageIndex > 0) {
                collectPersonalData();
            }
            
            // Zeige neue Seite
            currentPage = pageIndex;
            
            // Für die persönliche Daten-Seite
            if (currentPage === 0) {
                document.getElementById('page-0').classList.add('active');
            } 
            // Für die Ergebnisseite
            else if (currentPage === pages.length) {
                renderPersonalData();
                renderResultsSummary();
                document.getElementById('page-final').classList.add('active');
                
                // Verzögerung zum Zeichnen des Radar-Diagramms
                setTimeout(() => {
                    try {
                        drawRadar();
                        console.log("Radar-Chart erfolgreich gezeichnet");
                    } catch (e) {
                        console.error("Fehler beim Zeichnen des Radar-Charts:", e);
                    }
                }, 100);
            } 
            // Für die Frageseiten
            else {
                renderFragen();
                document.getElementById(pages[currentPage - 1]).classList.add('active');
            }
            
            // Navigation-Buttons aktualisieren
            document.getElementById('prevButton').disabled = currentPage === 0;
            document.getElementById('nextButton').textContent = currentPage === pages.length ? 'Abschliessen' : 'Weiter';
            
            // Fortschrittsanzeige aktualisieren
            updateProgressIndicator();
        }

        // Event-Listener für Navigation
        document.getElementById('prevButton').addEventListener('click', () => {
            if (currentPage > 0) {
                goToPage(currentPage - 1);
            }
        });

        document.getElementById('nextButton').addEventListener('click', () => {
            if (currentPage < pages.length) {
                goToPage(currentPage + 1);
            } else {
                // Formular abschliessen - hier könnten Daten gespeichert/gesendet werden

                window.print();
                window.open('mailto:BNE@example.com?subject=subject&body=Bitte das als PDF gespeicherte Ergebnis anhängen und einschicken');
                alert('Standortbestimmung abgeschlossen!');
            }
        });

        // Responsive Canvas
        window.addEventListener('resize', () => {
            if (currentPage === pages.length) {
                drawRadar();
            }
        });

        // Initialisierung
        function init() {
            initPages();
            goToPage(0);
        }

        // Globale Funktion für Event-Handler
        window.handleAntwort = handleAntwort;

        // Starte die Anwendung
        init();
    </script>
</body>
</html>